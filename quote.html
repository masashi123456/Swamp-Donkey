<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Instant Quote Generator - Swamp Donkey</title>
  <link rel="icon" href="images/swamp-favicon.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="styles/consolidated.css">
</head>
<body>
  <header>
    <a href="index.html">
            <img id="logo" src="images/SWAMP DONKEY.png" alt="company logo">
        </a>
  </header>

  <nav class="navbar">
    <a href="index.html">Home</a>
    <a href="quote.html">Quick Quote</a>
    <a href="services.html">Services</a>
    <a href="contact.html">Contact</a>
    <a href="review.html">Reviews</a>
  </nav>
  <main class="quote-container">
    <div class="quote-card">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold main-heading">Instant Quote Generator</h1>
        <p class="text-gray-500 mt-2">Start by entering your vehicle's VIN below.</p>
      </div>
      <div id="vinEntryContainer">
        <label for="vinInput" class="form-label">Vehicle VIN</label>
        <div class="flex flex-col sm:flex-row gap-2">
          <input type="text" id="vinInput" class="custom-input flex-grow" placeholder="Enter 11‚Äì17 digit VIN">
          <button id="vinSubmitButton" class="action-button">Continue</button>
        </div>
        <p id="vinError" class="vin-error-message"></p>
      </div>
      <div id="serviceSelectorContainer" class="space-y-6 hidden">
        <div>
          <label for="vehicleType" class="form-label">1. Select Vehicle Type</label>
          <select id="vehicleType" class="custom-select w-full">
            <option>Car</option>
            <option>SUV</option>
            <option>Truck</option>
            <option>Big Vehicle</option>
          </select>
        </div>
        <div>
          <label for="serviceCategory" class="form-label">2. Select Service Category</label>
          <select id="serviceCategory" class="custom-select w-full">
            <option value="">-- Choose a Category --</option>
          </select>
        </div>
        <div>
          <label for="specificService" class="form-label">3. Select Specific Service</label>
          <select id="specificService" class="custom-select w-full">
            <option value="">-- Choose a Service --</option>
          </select>
        </div>
      </div>
      <div id="quoteResult" class="mt-8 text-center"></div>
    </div>
  </main>
  <div id="detailsModal" class="modal-overlay">
    <div class="modal-content">
      <h2>Additional Details</h2>
      <div class="modal-form">
        <input type="number" id="vehicleYear" placeholder="Vehicle Year" class="custom-input">
        <input type="text" id="vehicleMake" placeholder="Vehicle Make" class="custom-input">
        <input type="text" id="vehicleModel" placeholder="Vehicle Model" class="custom-input">
        <input type="text" id="vehicleLocation" placeholder="Location of Vehicle" class="custom-input">
        <input type="text" id="availability" placeholder="Select a Date & Time" class="custom-input">
        <div class="modal-buttons">
          <button id="cancelButton" class="modal-button-secondary">Cancel</button>
          <button id="confirmButton" class="action-button">Confirm Request</button>
        </div>
      </div>
    </div>
  </div>
  <footer>
        <div class="foot">
            <p>üìû +1 208-547-8375</p>
            <p>‚úâ <a>swampdonkeymobilemechanics@gmail.com</a></p>
            <p>üìç <a href="https://www.google.com/maps/search/?api=1&query=235+S+4th+W+Rexburg%2C+ID+83440" target="_blank" rel="noopener">235 S 4th W Rexburg, ID 83440</a></p>
            <p id="lastModified"></p>
        </div>
        <div class="media">
            <a id="facebook" href="https://www.facebook.com/share/15zKQCcY5z/?mibextid=wwXIfr" target="_blank" rel="noopener" loading="lazy"><img src="images/fa.png" alt="facebook"></a>
            <a id="instagram" href="https://www.instagram.com/" target="_blank" rel="noopener" loading="lazy"><img src="images/insta.webp" alt="instagram"></a>
            <a id="x" href="https://x.com/?lang=en" target="_blank" rel="noopener" loading="lazy"><img src="images/x.webp" alt="x"></a>
        </div>
    </footer>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    const quoteData = {
      "Common Maintenance": {
        "Oil Change": { Car: 75, SUV: 95, Truck: 110, "Big Vehicle": 150, description: "Replacing engine oil and filter." },
        "Tire Rotation": { Car: 40, SUV: 50, Truck: 60, "Big Vehicle": 80, description: "Rotating tires to ensure even wear." },
        "Brake Inspection": { Car: 50, SUV: 60, Truck: 70, "Big Vehicle": 90, description: "Checking brake pads, rotors, and fluid." },
        "Battery Check": { Car: 30, SUV: 40, Truck: 50, "Big Vehicle": 60, description: "Testing battery health and terminals." }
      },
      "Repairs & Diagnostics": {
        "Check Engine Diagnostics": { Car: 80, SUV: 90, Truck: 110, "Big Vehicle": 140, description: "Using diagnostic tools to check engine issues." },
        "Brake Replacement": { Car: 250, SUV: 300, Truck: 350, "Big Vehicle": 450, description: "Replacing brake pads and rotors." },
        "AC Repair": { Car: 150, SUV: 200, Truck: 250, "Big Vehicle": 350, description: "Repairing or recharging air conditioning." }
      },
      "Emergency & Roadside Assistance": {
        "Jump Start": { Car: 40, SUV: 50, Truck: 60, "Big Vehicle": 80, description: "Battery jump start service." },
        "Towing": { Car: "$100 - $300", SUV: "$120 - $350", Truck: "$150 - $400", "Big Vehicle": "$200 - $500", description: "Vehicle towing service." },
        "Lockout Service": { Car: 60, SUV: 70, Truck: 80, "Big Vehicle": 100, description: "Unlocking vehicle doors." }
      }
    };

    const vinEntryContainer = document.getElementById("vinEntryContainer");
    const vinInput = document.getElementById("vinInput");
    const vinError = document.getElementById("vinError");
    const vinSubmitButton = document.getElementById("vinSubmitButton");
    const serviceSelectorContainer = document.getElementById("serviceSelectorContainer");
    const vehicleTypeSelect = document.getElementById("vehicleType");
    const serviceCategorySelect = document.getElementById("serviceCategory");
    const specificServiceSelect = document.getElementById("specificService");
    const quoteResultDiv = document.getElementById("quoteResult");
    const detailsModal = document.getElementById("detailsModal");
    const cancelButton = document.getElementById("cancelButton");
    const confirmButton = document.getElementById("confirmButton");
    let userVIN = "";
    let currentQuoteDetails = {};
    vinSubmitButton.onclick = () => {
      const vin = vinInput.value.trim().toUpperCase();
      if (vin.length >= 11 && vin.length <= 17) {
        userVIN = vin;
        vinError.textContent = "";
        vinEntryContainer.style.display = "none";
        serviceSelectorContainer.classList.remove("hidden");
        serviceCategorySelect.innerHTML = '<option value="">-- Choose a Category --</option>';
        Object.keys(quoteData).forEach(cat => {
          serviceCategorySelect.innerHTML += `<option value="${cat}">${cat}</option>`;
        });
      } else {
        vinError.textContent = "Please enter a valid VIN (11‚Äì17 characters).";
      }
    };
    serviceCategorySelect.onchange = () => {
      specificServiceSelect.innerHTML = '<option value="">-- Choose a Service --</option>';
      if (!quoteData[serviceCategorySelect.value]) return;
      Object.keys(quoteData[serviceCategorySelect.value]).forEach(service => {
        specificServiceSelect.innerHTML += `<option value="${service}">${service}</option>`;
      });
    };
    function displayQuote() {
      const vehicle = vehicleTypeSelect.value;
      const category = serviceCategorySelect.value;
      const service = specificServiceSelect.value;
      if (!vehicle || !category || !service || !quoteData[category][service]) return quoteResultDiv.innerHTML = "";
      const { description } = quoteData[category][service];
      const price = quoteData[category][service][vehicle];
      currentQuoteDetails = { vehicle, service, priceString: typeof price === "string" ? price : `$${price}` };
      quoteResultDiv.innerHTML = `<div class='bg-gray-50 p-6 rounded-lg border'><h3 class='text-lg font-semibold'>Estimated Quote</h3><div class='my-4 text-4xl font-bold'>${currentQuoteDetails.priceString}</div><p>${description}</p><button id='orderNowButton' class='action-button mt-4'>Order Now</button></div>`;
      document.getElementById("orderNowButton").onclick = () => detailsModal.style.display = "flex";
    }
    vehicleTypeSelect.onchange = displayQuote;
    specificServiceSelect.onchange = displayQuote;
    cancelButton.onclick = () => detailsModal.style.display = "none";
    confirmButton.onclick = () => {
      const year = document.getElementById("vehicleYear").value;
      const make = document.getElementById("vehicleMake").value;
      const model = document.getElementById("vehicleModel").value;
      const location = document.getElementById("vehicleLocation").value;
      const availability = document.getElementById("availability").value;
      if (!year || !make || !model || !location || !availability) return alert("Please fill all fields.");
      const message = `Year: ${year}\nMake: ${make}\nModel: ${model}\nLocation: ${location}\nAvailability: ${availability}\nVehicle Type: ${currentQuoteDetails.vehicle}\nService: ${currentQuoteDetails.service}\nQuote: ${currentQuoteDetails.priceString}\nVIN: ${userVIN}`;
      window.location.href = `contact.html?message=${encodeURIComponent(message)}`;
    };
    flatpickr("#availability", { enableTime: true, dateFormat: "F j, Y at h:i K", minDate: "today" });
    document.getElementById("lastModified").textContent = `Last Updated: ${document.lastModified}`;
  </script>
</body>
</html>
